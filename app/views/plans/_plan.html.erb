<%= render "shared/header", title: plan.name %>

<% entries_by_day = plan.entries_by_day %>
<div data-controller="checklist">
  <% (1..plan.days).each do |day_number| %>
    <section>
      <h2>Day <%= day_number %></h2>
      <% day_entries = entries_by_day[day_number] || [] %>
      <% if day_entries.any? %>
        <ol>
          <% day_entries.each do |entry| %>
            <li>
              <%= entry.exercise.name %> <%= entry.humanized_sets_and_reps %>
            </li>
          <% end %>
        </ol>
      <% else %>
        <p>No exercises for this day.</p>
      <% end %>
    </section>
  <% end %>

  <%= button_to "Activate Plan", plan_enrollments_path(plan_enrollment: { plan_id: plan.id, user_id: Current.user.id }), method: :post %>
</div>